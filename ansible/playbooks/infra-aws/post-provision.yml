---
- name: "Post-Provision classroom infrastructure on bootstrap host"
  hosts: 'bootstrap'
  gather_facts: true
  roles:
    - role: infra
      do: load
      infra_type: aws
    - role: infra
      do: provision-post-instructor
      infra_type: aws
      
- name: "Post-Provision classroom install instructor"
  hosts: 'instructor'
  gather_facts: true
  become: yes
  roles:
    - role: instructor 
      do: load
    - role: instructor
      do: install
      libre_user: instructor

- name: "Post-Provision classroom install workstations"
  hosts: 'workstations'
  gather_facts: true
  vars:
    libre_type: "student"
    libre_verbose: true
    libre_debug: false
  roles:
    - role: student
      do: load
    - role: student
      do: install

- name: "Post-Provision classroom students"
  hosts: 'students'
  gather_facts: true
  roles:
    - role: infra
      do: load
      infra_type: aws
    - role: infra
      do: provision-post-students
      infra_type: aws

- name: "Post-Provision classroom finialize on bootstrap"
  hosts: 'bootstrap'
  gather_facts: true
  roles:
    - role: infra 
      do: load
      infra_type: aws
    - role: infra
      do: provision-post-post
      infra_type: aws