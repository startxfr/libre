---
# Start pre-tasks
- name: "Start lab on local (pre-tasks)"
  hosts: 'local'
  gather_facts: yes
  user: root
  roles:
    - { role: lab, do: load }
    - { role: lab, do: pre, lab_action: start }
  tasks:
    - name: "start : Save the current lab id in {{ config_libre.directory.conf }}/{{ r_lab_track_current_lab_filename }}"
      copy:
        dest: "{{ config_libre.directory.conf }}/{{ r_lab_track_current_lab_filename }}"
        content: "{{ current_lab.idn }}"

# Start tasks
- name: "start : Start creating lab {{ current_lab.id }} {{ current_lab.name }}"
  import_playbook: /tmp/current_lab/start.yml" # "{{ r_current_lab_dir }}/start.yml"

# Start post-tasks
- name: "Start lab on local (post-tasks)"
  hosts: 'local'
  gather_facts: no
  user: root
  roles:
    - { role: lab, do: post, lab_action: start }
